static boolean h=1<2;static boolean w=1<2;static void f(String s,int w,int h){Set l=new HashSet();int x=0,y=0,d=2;while(1<2){int c=x*10000+y*100+d;if(!l.add(c)){System.out.println(8);return;}l.add(c);String g=new String(g(s,w,h,x,y));d=d(g,d);x+=d/2;y+=-d%2;if(d==0){System.out.println(9);return;}}}static char[]g(String s,int w,int h,int x,int y){String[]r=s.split("\n");char[]a=new char[w*h];for(int i=0;i<w;i++){for(int j=0;j<h;j++){try{a[j*w+i]=r[j+y].charAt(i+x);}catch(Exception e){a[j*w+i]=' ';}}}return a;}static int y(String c,String p){return c.replaceAll(p,"").length();}static int d(String c,int l){int x=y(c,"[^<]*")-y(c,"[^>]*");int y=y(c,"[^\\^]*")-y(c,"[^v]*");if(y(c,"[^W]*")-y(c,"[^w]*")<0)w=2>3;if(y(c,"[^W]*")-y(c,"[^w]*")>0)w=1<2;if(y(c,"[^H]*")-y(c,"[^h]*")<0)h=2>3;if(y(c,"[^H]*")-y(c,"[^h]*")>0)h=1<2;if(!w)y=0;if(!h)x=0;if(x!=0&Math.abs(x)==Math.abs(y)){if(l/2!=0)y=0;else x=0;}if(Math.abs(x)>Math.abs(y))return x>0?-2:2;else if(Math.abs(y)>Math.abs(x))return y>0?1:-1;return 0;}