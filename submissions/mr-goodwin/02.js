function f(n){function r(r){var t=n.split("").filter(function(n){return-1!=r.indexOf(n)});return t.sort(function(n){return r.indexOf(n)})}var t=["`1234567890-=~!@#$%^&*()_+","qwertyuiop[]\\QWERTYUIOP{}|","asdfghjkl;'ASDFGHJKL:\"","zxcvbnm,./ZXCVBNM<>?"],e=t.map(r);e=e.map(function(n,r){return{row:n,index:r}}).filter(function(n){return n.row.length>0});var o=e.sort(function(n,r){return n.row.length-r.row.length}),i=e.filter(function(n){return n.row.length==o[0].row.length}).sort(function(n){return n.row.index});i.length>1&&i.forEach(function(n){n.row=n.row.filter(function(n,r,t){return t.indexOf(n)===r})});var u=i.reduce(function(n,r,t){return r.row.length<n.row.length?r:r.index<n.index?r:n}),f=u.row.sort(function(n,r){return t[u.index].indexOf(n)-t[u.index].indexOf(r)}).join("").replace(/(\w)\1+/g,function(n,r){return r[0]});console.log(f)}