static void f(String b,int c){List<String>f=Arrays.asList(b.split("\n"));Collections.reverse(f);List<List<String[]>>e=new ArrayList<>();for(String l:f){List<String[]>x=new ArrayList<>();e.add(x);String r=l.trim();if(!r.isEmpty()){String[] p=r.split("\\|");for(String o:p){String[]s=o.split(":");s[1]=l(s[1]);x.add(s);}}}c--;List<int[]> v=new ArrayList<>();int i=0,t=0,n=0;boolean u=true;while(true){t=o(v,i,t);u=d(e,i,u,t);t=i(v,e,i,u,t);if(t==0){m(i,n,"lonely ");return;}if(t>c){m(i,n,"polite ");return;}i=l(v,u,e.size());n++;}}static void m(int i,int s,String a){System.out.println(a+"after "+s+" stops at "+(i>=4?i+1:i)+" floor");}static int l(List<int[]>e,boolean d,int f){int i=d?f:-1;for(int[]p:e){i=d?Math.min(i,p[1]):Math.max(i,p[1]);}return i;}static boolean d(List<List<String[]>>x,int i,boolean d,int c){if(i==0)return true;if(i==x.size()-1)return false;if(c==0){for(String[]p:x.get(i)){int t=Integer.parseInt(p[1]);if(d&&t>i||!d&&t<i)return d;}return !d;}return d;}static int i(List<int[]>e,List<List<String[]>>x,int i,boolean d,int c){Iterator<String[]>t=x.get(i).iterator();while(t.hasNext()){String[]p=t.next();int n=Integer.parseInt(p[0]),f=Integer.parseInt(p[1]);if(d&&f>i||!d&&f<i){c+=n;e.add(new int[]{n,f});t.remove();}}return c;}static int o(List<int[]>e,int i,int c){Iterator<int[]>t=e.iterator();while(t.hasNext()){int[]p=t.next();if(p[1]==i){t.remove();c-=p[0];}}return c;}static String l(String f){int a=Integer.parseInt(f);return String.valueOf(a>4?a-1:a);}