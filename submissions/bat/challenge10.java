static void f(int n,String s){String[]p=s.split("\n");int rD=p.length,cD=p[0].length(),r=rD-1,c=0;char[][]t=new char[rD][cD];for(char a:s.toCharArray()){if(a=='\n'){r--;c=0;}else{t[r][c++]=a;}}int[]d=new int[cD];int l=0;int u=0;for(int i=0;i<cD;i++){int e=e(t,rD,i);if(e>0){d[i]=e;u++;}if(e<0){n--;l++;}}if(l+u==0)System.out.print(":(");else{if(n>=0&&n-u<=0){for(int i=0;i<cD&&n>0;i++){if(d[i]!=0){t[d[i]][i]='$';n--;}}p(t);}else System.out.print(n-u);}}static int e(char[][]t,int r,int j){if(t[0][j]!='X')return 0;int b=0;for(int i=1;i<r;i++){char c=t[i][j];if("/\\|$.".indexOf(c)<0)return 0;if(c=='\\')b--;if(c=='/')b++;if(b>1||b<-1)return 0;if(c=='$'&&b==0)return-1;if(c=='.'&&b==0)return i;}return 0;}static void p(char[][]c){for(int i=c.length-1;i>=0;i--){for(int j=0;j<c[0].length;j++)System.out.print(c[i][j]);System.out.println();}}