function f(a){function b(a,b){if("d"==a){if("\\"==b)return"r";if("/"==b)return"l"}else if("u"==a){if("\\"==b)return"l";if("/"==b)return"r"}else if("l"==a){if("\\"==b)return"u";if("/"==b)return"d"}else{if("\\"==b)return"d";if("/"==b)return"u"}}function c(a,b){if("d"==b){var c=a.split(",");c[0]++,a=c.join(",")}else if("r"==b){var c=a.split(",");c[1]++,a=c.join(",")}else if("l"==b){var c=a.split(",");c[1]--,a=c.join(",")}else if("u"==b){var c=a.split(",");c[0]--,a=c.join(",")}return a}function d(a){var b=a.split(",");return b[0]<0||b[0]>j?!0:b[1]<0||b[1]>i?!0:!1}function e(a,b,c){for(var d=0;d<a.length;d++)if(" "!=a[d])switch(a[d]){case"v":k[c+1+","+f(d,b)]="d";break;case">":k[c+1+","+f(d,b)]="r";break;case"^":k[c+1+","+f(d,b)]="u";break;case"<":k[c+1+","+f(d,b)]="l";break;case"@":l[c+1+","+f(d,b)]="N";break;case"#":o[c+1+","+f(d,b)]=1;break;case"/":p[c+1+","+f(d,b)]="/";break;case"\\":p[c+1+","+f(d,b)]="\\";break;default:g(a[d],c+1+","+f(d,b))}}function f(a,b){var c=a+1%b;return c}function g(a,b){m[a]?m[a].end=b:m[a]={begin:b},n[b]=a}var h=a.slice(0,-1).split("\n"),i=h[0].length,j=h.length,k={},l={},m={},n={},o={},p={},q={},r=1;h.forEach(function(a,b){e(a,a.length,b)}),Object.keys(k).forEach(function(a){for(var e=origin=a,f=k[a],g=0;!(l[e]||o[e]||d(e)||g);)e=c(e,f),n[e]?e=m[n[e]].begin==e?m[n[e]].end:m[n[e]].begin:p[e]?f=b(f,p[e]):k[e]?g=1:(!q[e]||q[e]==origin||p[e]||o[e]||l[e]||(r=-1),q[e]=origin),"N"==l[e]&&(l[e]="Y")}),Object.keys(l).forEach(function(a){"N"==l[a]&&(r=-1!=r?0:-1)}),r=Object.keys(l).length<1&&-1!=r?0:r,1==r?console.log(":D"):0==r?console.log(":("):console.log(":/")}