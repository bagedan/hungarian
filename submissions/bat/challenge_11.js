function f(a){function b(a,b){if("d"==a){if("\\"==b)return"r";if("/"==b)return"l"}else if("u"==a){if("\\"==b)return"l";if("/"==b)return"r"}else if("l"==a){if("\\"==b)return"u";if("/"==b)return"d"}else{if("\\"==b)return"d";if("/"==b)return"u"}}function c(a,b){var c=a.split(",");return"d"==b?(c[0]++,a=c.join(",")):"r"==b?(c[1]++,a=c.join(",")):"l"==b?(c[1]--,a=c.join(",")):"u"==b&&(c[0]--,a=c.join(",")),a}function d(a){var b=a.split(",");return b[0]<0||b[0]>k?!0:b[1]<0||b[1]>j?!0:!1}function e(a,b,c){for(var d=0;d<a.length;d++)if(" "!=a[d])switch(a[d]){case"v":f(l,c,d,b,"d");break;case">":f(l,c,d,b,"r");break;case"^":f(l,c,d,b,"u");break;case"<":f(l,c,d,b,"l");break;case"@":f(m,c,d,b,"N");break;case"#":f(p,c,d,b,1);break;case"/":f(q,c,d,b,"/");break;case"\\":f(q,c,d,b,"\\");break;default:h(a[d],c+1+","+g(d,b))}}function f(a,b,c,d,e){a[b+1+","+g(c,d)]=e}function g(a,b){var c=a+1%b;return c}function h(a,b){n[a]?n[a].end=b:n[a]={begin:b},o[b]=a}var i=a.split("\n"),j=i[0].length,k=i.length,l={},m={},n={},o={},p={},q={},r={},s=1;i.forEach(function(a,b){e(a,a.length,b)}),Object.keys(l).forEach(function(a){for(var e=origin=a,f=l[a],g=0;!(m[e]||p[e]||d(e)||g);){if(e=c(e,f),o[e]){var h=n[o[e]];e=h.begin==e?h.end:h.begin}else q[e]?f=b(f,q[e]):l[e]?g=1:(!r[e]||r[e]==origin||q[e]||p[e]||m[e]||(s=-1),r[e]=origin);"N"==m[e]&&(m[e]="Y")}}),Object.keys(m).forEach(function(a){"N"==m[a]&&(s=-1!=s?0:-1)}),s=Object.keys(m).length<1&&-1!=s?0:s,1==s?console.log(":D"):0==s?console.log(":("):console.log(":/")}