static void f(String a,int b){String c[]=a.split("\n"),d[],y[];int e=c.length,f[][]=new int[e][],i,g=1,h[]=new int[e],k,l=0,m[][]=new int[e][],z,u,v,as=e;boolean o=false,p,r,s;for(i=0;i<e;++i){f[i]=new int[e];m[i]=new int[e];d=c[e-i-1].split("[|]");z=1;for(String t:d){if(!t.isEmpty()){y=t.split(":");u=Integer.valueOf(y[1]);v=Integer.valueOf(y[0]);if(y.length==2){f[i][u>3?u-1:u]=v;m[i][u>3?u-1:u]=z;++z;}}}h[i]=f[0][i];f[0][i]=0;g+=h[i];if(h[i]!=0){if(as==e){as=i;}else{o=true;}}}p=(g==1||g>b);if(p){if(g==1){System.out.print("lonely after 0 stops at 0 floor");}else{System.out.print("polite after 0 stops at 0 floor");}}while(!p){int w=100,q=-1;++l;k=as;r=!o;s=false;g-=h[as];h[as]=0;if(g==1){for(i=0;i<e;++i){if(w>m[k][i]&m[k][i]!=0) {q=i;w=m[k][i];}}if(q!=-1) {o=(as=q)>k;r=!o;h[q]+=f[k][q];g+=f[k][q];f[k][q]=0;m[k][q]=0;s=true;}}for(i=0;i<e;++i){if(o){if(i>k){h[i]+=f[k][i];g+=f[k][i];f[k][i]=0;if(h[i]!=0&i!=q){if(!s){as=i;s=true;}else{r=true;}}}}else{if(i<k){h[i]+=f[k][i];g+=f[k][i];f[k][i]=0;if(h[i]!=0&i!=q){if(!s){as=i;s=true;}else{as=i;r=false;}}}}}o=r;if(p=g==1|g>b){k=k>3?k+1:k;System.out.print(g>b?"polite after "+l+" stops at "+k+" floor":"lonely after "+l+" stops at "+k+" floor");}}}