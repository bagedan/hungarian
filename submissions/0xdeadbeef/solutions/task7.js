function f(b, m) { var b = "[[[" + b.replace(/:/g, ",").replace(/\|/g, "],[").replace(/\n/g, "]],[[") + "]]]", x = eval(b).reverse(); x.splice(4, 0, []); for (var lift = [], d = 1, n = 0, e = 0, s = function () { for (var e = 0, n = 0; n < lift.length; n++) e += lift[n][0]; return e }, needtostop = function () { return lift.some(function (e) { return e[1] == n }) }; ;) { for (var a = x[n], i = lift.length - 1; i >= 0; --i) lift[i][1] == n && lift.splice(i, 1); (d > 0 ? x.length - 1 != n : d) ? d > 0 && lift.every(function (e) { return e[1] < n }) && a.every(function (e) { return e[1] < n }) && (d = -d) : d = -d; for (var i = 0; i < a.length; i++) (d > 0 ? a[i][1] > n : a[i][1] < n) && lift.push(a[i]); if (s() >= m) return void console.log("polite after " + e + " stops at " + n + " floor"); if (0 == s()) return void console.log("lonely after " + e + " stops at " + n + " floor"); for (e++, n += d; !needtostop() ;) n += d } }