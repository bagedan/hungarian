static void f(int n,String a){String[]b=a.split("\n");int c=b[0].length(),e=b.length;char[][]d=new char[c][e];for(int i=0;i<c;i++){for(int j=e-1;j>=0;j--){d[i][j]=b[j].charAt(i);}}Pattern f=Pattern.compile("(.*\\.)([|\\\\/]+)(X$)"),g=Pattern.compile("(.*\\$)([|\\\\/]+)(X$)");List<String>h=new ArrayList<>(Arrays.asList(new String[d.length]));List<Integer>k=new ArrayList<>(),l=new ArrayList<>();for(int i=0;i<d.length;i++){String m=String.valueOf(d[i]);Matcher o=f.matcher(m),p=g.matcher(m);if(o.matches()&&q(o.group(2))){l.add(i);}else if(p.matches()&&q(p.group(2))){k.add(i);}else{h.set(i,m);}}PrintStream r=System.out;if(k.size()+l.size()==0){r.println(":(");}else if(k.size()>n){r.println(n-k.size());}else if(k.size()+l.size()<n){r.println(n-k.size()-l.size());}else{for(int s:k){h.set(s,String.valueOf(d[s]));}int t=n-k.size();for(int x:l){String y=String.valueOf(d[x]);if(t-->0){y=new StringBuilder().append(y).replace(y.lastIndexOf('.'),y.lastIndexOf('.')+1,"$").toString();}h.set(x,y);}for(int i=0;i<h.get(0).length();i++){for(int j=0;j<h.size();j++){r.print(h.get(j).charAt(i));}r.print("\n");}}}static boolean q(String candidate){int angleCounter=0;for(char c:candidate.toCharArray()){if(c=='\\'){if(angleCounter<1)angleCounter++;else return false;}if(c=='/'){if(angleCounter>-1)angleCounter--;else return false;}}return angleCounter==0;}