static void f(string a,int b){string[]c=a.Split('\n'),d,e;Array.Reverse(c);int f=c.Length,g=1,h=0,i=h,j=-1,k=0,l,m,n,o;int[]p=new int[f];string q=" after {0} stops at {1} floor",r;for (;;){g-=p[h];p[h]=0;r=c[h];if(r!=""){d=r.Split('|');bool s=true;r="";o=u(p,h,j);foreach(var v in d){e=v.Split(':');m=int.Parse(e[0]);n=int.Parse(e[1]);if(n>4){n-=1;}if(h==o&&s){j=Math.Sign(n-h);s=false;}if(j*(n-h)>0){p[n]+=m;g+=m;}else r+=v+"|";}if(r!=""){r=r.Substring(0,r.Length-1);}c[h]=r;}l=h>=4?h+1:h;if(g>b){Console.WriteLine(string.Format("polite"+q,k,l));return;}if(g==1){Console.WriteLine(string.Format("lonely"+q,k,l));return;}k++;h=u(p,h,j);}}static int u(int[]a,int b,int c){int d=0,e=a.Length,f;if(b==0)c=1;if(b==e-1)c=-1;for(f=b+c;d<e;f+=c){if(d==e-1)return b;if(a[f]>0)return f;if(f==0||f==e-1){c*=-1;f=b;}d++;}return b;}