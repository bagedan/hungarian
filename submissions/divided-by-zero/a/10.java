 static void f(int n,String f) { String[] p=f.split("\\r?\\n");String b=p[p.length-1];List<T> g=new ArrayList<>();int a=0;for (int i=0;i < b.length();++i) { if ('X'==b.charAt(i)) { Y m=Y.V;for (int k=p.length-2;k >=0;--k) { boolean b1=m==Y.V;char c=p[k].charAt(i);if (b1 && c=='.') { T t=new T();t.j=new int[]{i,k};g.add(t);} else if (b1 && c=='$') { ++a;} else if (b1 && c=='/') { m=Y.Q;} else if (b1 && c=='\\') { m=Y.W;} else if (m==Y.Q && c=='\\') { m=Y.V;} else if (m==Y.W && c=='/') { m=Y.V;} else if (b1 && c=='|') { m=Y.V;} else if( !((m==Y.W || m==Y.Q) && c=='|' )) { break;} } } } if (g.size()==0 && a==0) { System.out.println(":(");} else if( (g.size() + a) < n ) { System.out.println( n-(g.size() + a) );} else if( a > n ) { System.out.println( n-a );} else if( (g.size() + a) >=n ) { int r=n-a;for (int i=0;i < r;++i) { StringBuilder sb=new StringBuilder(p[g.get(i).j[1]]);sb.setCharAt(g.get(i).j[0],'$');p[g.get(i).j[1]]=sb.toString();} for( int i=0;i < p.length;++i ) { System.out.println(p[i]);} } } enum Y { V,W,Q;} static class T { int[] j;}